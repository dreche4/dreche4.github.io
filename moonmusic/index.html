

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart, Crescent Moon, and Rainbow Animation</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #0d335f;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .controls-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        canvas {
            border: 2px solid white;
            max-width: 100%;
            height: auto;
        }
        .plyr, .default-player {
            margin-top: 20px;
            width: 100%;
            max-width: 300px;
        }
        .default-player {
            display: none;
        }
        /* Custom CSS for default HTML5 audio player */
        .default-player audio {
            width: 100%;
            background-color: #f1f3f4;
            border-radius: 4px;
            padding: 5px;
        }
        .default-player audio::-webkit-media-controls-panel {
            background-color: #f1f3f4;
        }
        .default-player audio::-webkit-media-controls-current-time-display,
        .default-player audio::-webkit-media-controls-time-remaining-display {
            color: #5f6368;
        }
        #audio-upload, #shape-selector {
            margin: 10px 0;
            padding: 10px;
            width: 100%;
            max-width: 300px;
        }
        #song-title {
            color: white;
            margin-top: 10px;
            font-size: 18px;
            text-align: center;
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        @media (max-width: 768px) {
            .controls-container {
                padding: 10px;
            }
            canvas {
                width: 100%;
                height: auto;
            }
        }
    </style>

    <!-- Include Plyr CSS -->
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
</head>
<body>
<h2 style="color: white;">Coldplay audio player</h2>
<div class="controls-container">
    <input type="file" id="audio-upload" accept="audio/*" />
    <select id="shape-selector">
        <option value="heart">Coldplay</option>
        <option value="moon">Mascara  Coldplay</option>
        <option value="rainbow">Rainbow</option>
    </select>

    <!-- Display the song title here -->
    <h2 id="song-title"></h2>

    <!-- Audio element for Plyr -->
    <audio id="player" class="plyr" controls></audio>

    <!-- Default HTML5 audio player -->
    <div class="default-player">
        <audio id="default-player" controls></audio>
    </div>
</div>

<!-- Include Plyr JS -->
<script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>

<script>
let amplitude, fft;
let song;
let shapes = [];
let numShapes = 10;
let selectedShape = 'heart';
let player;

function setup() {
    let canvas = createCanvas(600, 600);
    canvas.parent(document.body);
    canvas.style('max-width', '100%');
    canvas.style('height', 'auto');

    amplitude = new p5.Amplitude();
    fft = new p5.FFT();

    for (let i = 0; i < numShapes; i++) {
        let x = random(width);
        let y = random(height);
        shapes.push({x: x, y: y});
    }

    let fileInput = document.getElementById('audio-upload');
    fileInput.addEventListener('change', handleFileUpload);

    let shapeSelector = document.getElementById('shape-selector');
    shapeSelector.addEventListener('change', function() {
        selectedShape = this.value;
    });

    // Initialize Plyr with fallback
    try {
        player = new Plyr('#player');
    } catch (error) {
        console.error('Plyr initialization failed:', error);
        document.querySelector('.plyr').style.display = 'none';
        document.querySelector('.default-player').style.display = 'block';
    }
}

function draw() {
    background('#0d335f');

    if (!song || !song.isPlaying()) {
      return;
    }

    let level = amplitude.getLevel();
    let size = map(level, 0, 1, 0.5, 1.5); // Escala de la mida de la forma

    let spectrum = fft.analyze();
    let bass = fft.getEnergy("bass");
    let treble = fft.getEnergy("treble");

    let r = map(bass, 0, 255, 50, 255);
    let b = map(treble, 0, 255, 50, 255);
    let g = map(level, 0, 1, 50, 255);

    noFill();
    stroke(r, g, b);
    strokeWeight(3);
//fill(r,g,b);//aquesta linea nova omple de color rgb i la anterior feia el contorn
   //the previous line fills the shape bellow with the rgb colors obtained from sound frequencies (bass and treble) and volume (level)
    // Dibuixar múltiples formes (cors, llunes o arcs de Sant Martí)
    shapes.forEach(shape => {
      push();
      translate(shape.x, shape.y);
      scale(size);

      if (selectedShape === 'heart') {
         fill(r,g,b);
          drawHeart(); // Dibuixa el cor
      } else if (selectedShape === 'moon') {
          drawCrescentMoon(); // Dibuixa la lluna creixent
      } else if (selectedShape === 'rainbow') {
          drawRainbow(); // Dibuixa l'arc de Sant Martí
      }

      pop();
   });
}

function drawHeart() {
    scale(0.5);
  beginShape();// c from coldplay
vertex(113, 22.1875);
vertex(101, 20.1875);
vertex(89, 22.1875);
vertex(80, 28.1875);
vertex(70, 36.1875);
vertex(64, 46.1875);
vertex(61, 58.1875);
vertex(61, 70.1875);
vertex(64, 80.1875);
vertex(69, 88.1875);
vertex(75, 94.1875);
vertex(80, 99.1875);
vertex(87, 101.1875);
vertex(95, 103.1875);
vertex(102, 104.1875);
vertex(111, 103.1875);
vertex(99, 96.1875);
vertex(91, 91.1875);
vertex(84, 83.1875);
vertex(79, 70.1875);
vertex(79, 58.1875);
vertex(82, 47.1875);
vertex(89, 36.1875);
vertex(98, 29.1875);
vertex(109, 23.1875);
vertex(113, 19.1875);
endShape(CLOSE);
beginShape();// o from coldplay
vertex(198, 20.1875);
vertex(187, 23.1875);
vertex(171, 28.1875);
vertex(164, 35.1875);
vertex(158, 43.1875);
vertex(153, 53.1875);
vertex(151, 65.1875);
vertex(153, 77.1875);
vertex(158, 87.1875);
vertex(166, 95.1875);
vertex(174, 100.1875);
vertex(184, 102.1875);
vertex(196, 104.1875);
vertex(209, 101.1875);
vertex(223, 94.1875);
vertex(232, 82.1875);
vertex(238, 69.1875);
vertex(237, 54.1875);
vertex(232, 42.1875);
vertex(223, 32.1875);
vertex(213, 25.1875);
vertex(202, 21.1875);
endShape(CLOSE);
beginShape();// l from coldplay
vertex(294, 27.1875);
vertex(290, 35.1875);
vertex(286, 44.1875);
vertex(285, 53.1875);
vertex(286, 60.1875);
vertex(288, 67.1875);
vertex(292, 74.1875);
vertex(296, 80.1875);
vertex(301, 85.1875);
vertex(310, 88.1875);
vertex(316, 90.1875);
vertex(323, 92.1875);
vertex(332, 92.1875);
vertex(339, 90.1875);
vertex(347, 86.1875);
vertex(348, 90.1875);
vertex(341, 95.1875);
vertex(331, 99.1875);
vertex(317, 100.1875);
vertex(304, 98.1875);
vertex(294, 93.1875);
vertex(287, 87.1875);
vertex(281, 79.1875);
vertex(278, 68.1875);
vertex(275, 60.1875);
vertex(276, 49.1875);
vertex(280, 38.1875);
vertex(286, 31.1875);
endShape(CLOSE);
beginShape();// d from coldplay
vertex(391, 27.1875);
vertex(399, 31.1875);
vertex(406, 36.1875);
vertex(411, 41.1875);
vertex(415, 47.1875);
vertex(420, 54.1875);
vertex(419, 63.1875);
vertex(419, 72.1875);
vertex(416, 79.1875);
vertex(414, 88.1875);
vertex(408, 92.1875);
vertex(402, 98.1875);
vertex(395, 103.1875);
vertex(390, 105.1875);
vertex(395, 107.1875);
vertex(401, 108.1875);
vertex(409, 107.1875);
vertex(415, 105.1875);
vertex(422, 102.1875);
vertex(428, 98.1875);
vertex(432, 93.1875);
vertex(436, 89.1875);
vertex(441, 82.1875);
vertex(443, 76.1875);
vertex(445, 70.1875);
vertex(445, 63.1875);
vertex(442, 56.1875);
vertex(440, 48.1875);
vertex(435, 41.1875);
vertex(429, 34.1875);
vertex(420, 28.1875);
vertex(414, 26.1875);
vertex(406, 24.1875);
vertex(399, 24.1875);
vertex(393, 25.1875);
endShape(CLOSE);
beginShape();// p from coldplay
vertex(482, 45.1875);
vertex(488, 44.1875);
vertex(494, 41.1875);
vertex(500, 39.1875);
vertex(506, 39.1875);
vertex(511, 41.1875);
vertex(516, 43.1875);
vertex(521, 44.1875);
vertex(527, 47.1875);
vertex(532, 50.1875);
vertex(536, 55.1875);
vertex(540, 60.1875);
vertex(543, 68.1875);
vertex(544, 75.1875);
vertex(545, 83.1875);
vertex(544, 92.1875);
vertex(540, 100.1875);
vertex(538, 106.1875);
vertex(544, 102.1875);
vertex(547, 97.1875);
vertex(550, 92.1875);
vertex(554, 85.1875);
vertex(556, 80.1875);
vertex(558, 74.1875);
vertex(558, 69.1875);
vertex(557, 63.1875);
vertex(556, 58.1875);
vertex(554, 53.1875);
vertex(552, 48.1875);
vertex(549, 44.1875);
vertex(544, 40.1875);
vertex(539, 35.1875);
vertex(532, 31.1875);
vertex(525, 27.1875);
vertex(518, 27.1875);
vertex(510, 27.1875);
vertex(502, 29.1875);
vertex(494, 33.1875);
vertex(488, 38.1875);
endShape(CLOSE);
beginShape();// l from coldplay
vertex(609, 31.1875);
vertex(607, 37.1875);
vertex(604, 43.1875);
vertex(603, 50.1875);
vertex(603, 56.1875);
vertex(603, 63.1875);
vertex(605, 69.1875);
vertex(608, 75.1875);
vertex(611, 80.1875);
vertex(614, 85.1875);
vertex(619, 88.1875);
vertex(624, 91.1875);
vertex(628, 93.1875);
vertex(634, 95.1875);
vertex(642, 96.1875);
vertex(648, 95.1875);
vertex(653, 95.1875);
vertex(658, 92.1875);
vertex(662, 89.1875);
vertex(667, 88.1875);
vertex(664, 94.1875);
vertex(660, 99.1875);
vertex(652, 101.1875);
vertex(645, 102.1875);
vertex(638, 104.1875);
vertex(631, 103.1875);
vertex(624, 102.1875);
vertex(617, 100.1875);
vertex(609, 95.1875);
vertex(604, 90.1875);
vertex(599, 84.1875);
vertex(597, 78.1875);
vertex(594, 71.1875);
vertex(594, 71.1875);
vertex(593, 64.1875);
vertex(592, 57.1875);
vertex(594, 51.1875);
vertex(596, 45.1875);
vertex(600, 39.1875);
vertex(604, 34.1875);
endShape(CLOSE);
beginShape();//a from coldplay
vertex(782, 80.1875);
vertex(781, 76.1875);
vertex(778, 71.1875);
vertex(775, 66.1875);
vertex(772, 61.1875);
vertex(768, 57.1875);
vertex(763, 54.1875);
vertex(756, 52.1875);
vertex(750, 49.1875);
vertex(743, 48.1875);
vertex(736, 49.1875);
vertex(727, 52.1875);
vertex(719, 56.1875);
vertex(713, 62.1875);
vertex(709, 68.1875);
vertex(706, 73.1875);
vertex(705, 79.1875);
vertex(701, 75.1875);
vertex(702, 70.1875);
vertex(702, 66.1875);
vertex(705, 59.1875);
vertex(706, 53.1875);
vertex(709, 48.1875);
vertex(712, 45.1875);
vertex(715, 41.1875);
vertex(718, 39.1875);
vertex(723, 36.1875);
vertex(728, 33.1875);
vertex(733, 31.1875);
vertex(741, 31.1875);
vertex(747, 31.1875);
vertex(753, 33.1875);
vertex(757, 34.1875);
vertex(762, 36.1875);
vertex(768, 40.1875);
vertex(773, 45.1875);
vertex(777, 50.1875);
vertex(782, 55.1875);
vertex(782, 62.1875);
vertex(784, 68.1875);
vertex(784, 75.1875);
endShape(CLOSE);
beginShape();// y from coldplay
vertex(815, 30.1875);
vertex(820, 33.1875);
vertex(826, 36.1875);
vertex(831, 39.1875);
vertex(836, 42.1875);
vertex(840, 48.1875);
vertex(844, 55.1875);
vertex(847, 63.1875);
vertex(848, 71.1875);
vertex(846, 80.1875);
vertex(843, 89.1875);
vertex(839, 97.1875);
vertex(833, 103.1875);
vertex(826, 106.1875);
vertex(818, 109.1875);
vertex(824, 109.1875);
vertex(832, 108.1875);
vertex(839, 108.1875);
vertex(846, 105.1875);
vertex(852, 101.1875);
vertex(855, 95.1875);
vertex(860, 90.1875);
vertex(862, 85.1875);
vertex(863, 79.1875);
vertex(865, 72.1875);
vertex(865, 65.1875);
vertex(863, 60.1875);
vertex(861, 54.1875);
vertex(857, 48.1875);
vertex(853, 43.1875);
vertex(848, 39.1875);
vertex(843, 34.1875);
vertex(836, 31.1875);
vertex(828, 29.1875);
vertex(822, 29.1875);
endShape(CLOSE);
beginShape();// cercle from coldplay
vertex(874, 30.1875);
vertex(868, 33.1875);
vertex(864, 39.1875);
vertex(863, 45.1875);
vertex(864, 49.1875);
vertex(866, 52.1875);
vertex(869, 54.1875);
vertex(872, 57.1875);
vertex(875, 57.1875);
vertex(879, 58.1875);
vertex(883, 57.1875);
vertex(886, 54.1875);
vertex(888, 51.1875);
vertex(890, 47.1875);
vertex(890, 43.1875);
vertex(889, 38.1875);
vertex(887, 35.1875);
vertex(883, 33.1875);
vertex(878, 30.1875);
endShape(CLOSE);
}

function drawCrescentMoon() {
 beginShape();// contorn
vertex(95, 80.1875);
vertex(100, 71.1875);
vertex(104, 59.1875);
vertex(110, 50.1875);
vertex(116, 39.1875);
vertex(124, 34.1875);
vertex(131, 29.1875);
vertex(141, 25.1875);
vertex(150, 23.1875);
vertex(159, 22.1875);
vertex(170, 22.1875);
vertex(179, 23.1875);
vertex(188, 25.1875);
vertex(195, 28.1875);
vertex(203, 32.1875);
vertex(209, 38.1875);
vertex(216, 47.1875);
vertex(219, 54.1875);
vertex(222, 61.1875);
vertex(226, 68.1875);
vertex(230, 71.1875);
vertex(235, 73.1875);
vertex(241, 73.1875);
vertex(247, 73.1875);
vertex(255, 73.1875);
vertex(261, 71.1875);
vertex(269, 70.1875);
vertex(273, 70.1875);
vertex(278, 68.1875);
vertex(281, 63.1875);
vertex(289, 59.1875);
vertex(295, 61.1875);
vertex(300, 63.1875);
vertex(302, 70.1875);
vertex(303, 77.1875);
vertex(299, 81.1875);
vertex(294, 84.1875);
vertex(288, 84.1875);
vertex(283, 84.1875);
vertex(280, 81.1875);
vertex(274, 82.1875);
vertex(267, 85.1875);
vertex(259, 89.1875);
vertex(252, 92.1875);
vertex(245, 95.1875);
vertex(239, 94.1875);
vertex(234, 94.1875);
vertex(235, 100.1875);
vertex(240, 106.1875);
vertex(243, 113.1875);
vertex(248, 120.1875);
vertex(250, 129.1875);
vertex(252, 138.1875);
vertex(250, 147.1875);
vertex(245, 157.1875);
vertex(238, 169.1875);
vertex(234, 180.1875);
vertex(230, 192.1875);
vertex(223, 207.1875);
vertex(218, 218.1875);
vertex(212, 227.1875);
vertex(205, 235.1875);
vertex(196, 240.1875);
vertex(182, 242.1875);
vertex(169, 242.1875);
vertex(156, 241.1875);
vertex(143, 233.1875);
vertex(134, 227.1875);
vertex(125, 219.1875);
vertex(118, 208.1875);
vertex(112, 202.1875);
vertex(105, 196.1875);
vertex(97, 189.1875);
vertex(91, 177.1875);
vertex(85, 168.1875);
vertex(79, 160.1875);
vertex(75, 148.1875);
vertex(73, 137.1875);
vertex(76, 129.1875);
vertex(78, 119.1875);
vertex(80, 113.1875);
vertex(70, 108.1875);
vertex(63, 106.1875);
vertex(54, 104.1875);
vertex(47, 104.1875);
vertex(38, 105.1875);
vertex(31, 105.1875);
vertex(27, 101.1875);
vertex(25, 94.1875);
vertex(26, 88.1875);
vertex(29, 81.1875);
vertex(36, 80.1875);
vertex(44, 81.1875);
vertex(49, 84.1875);
vertex(55, 87.1875);
vertex(63, 88.1875);
vertex(73, 86.1875);
vertex(84, 86.1875);
vertex(92, 83.1875);
vertex(95, 82.1875);
endShape(CLOSE);
    beginShape();// in eye
vertex(174, 140.1875);
vertex(175, 135.1875);
vertex(177, 131.1875);
vertex(181, 128.1875);
vertex(185, 127.1875);
vertex(189, 127.1875);
vertex(193, 129.1875);
vertex(196, 131.1875);
vertex(198, 137.1875);
vertex(198, 143.1875);
vertex(196, 147.1875);
vertex(194, 150.1875);
vertex(190, 152.1875);
vertex(186, 152.1875);
vertex(181, 152.1875);
vertex(177, 149.1875);
vertex(175, 145.1875);
vertex(175, 141.1875);
endShape(CLOSE);
    beginShape();// eye
vertex(153, 141.1875);
vertex(153, 135.1875);
vertex(155, 130.1875);
vertex(157, 123.1875);
vertex(161, 117.1875);
vertex(165, 113.1875);
vertex(169, 110.1875);
vertex(175, 105.1875);
vertex(182, 104.1875);
vertex(190, 105.1875);
vertex(196, 107.1875);
vertex(203, 111.1875);
vertex(206, 116.1875);
vertex(209, 122.1875);
vertex(211, 128.1875);
vertex(212, 134.1875);
vertex(211, 141.1875);
vertex(211, 148.1875);
vertex(207, 153.1875);
vertex(204, 159.1875);
vertex(199, 163.1875);
vertex(192, 166.1875);
vertex(183, 168.1875);
vertex(176, 168.1875);
vertex(167, 166.1875);
vertex(160, 160.1875);
vertex(154, 151.1875);
vertex(153, 145.1875);
endShape(CLOSE);
    beginShape();
vertex(127, 157.1875);
vertex(131, 161.1875);
vertex(135, 167.1875);
vertex(139, 172.1875);
vertex(144, 178.1875);
vertex(149, 182.1875);
vertex(155, 186.1875);
vertex(163, 189.1875);
vertex(168, 191.1875);
vertex(176, 193.1875);
vertex(184, 193.1875);
vertex(193, 193.1875);
vertex(202, 190.1875);
vertex(207, 186.1875);
vertex(212, 180.1875);
vertex(216, 175.1875);
vertex(219, 169.1875);
vertex(223, 163.1875);
vertex(224, 157.1875);
vertex(227, 150.1875);
vertex(227, 145.1875);
vertex(229, 139.1875);
vertex(234, 136.1875);
vertex(239, 137.1875);
vertex(242, 140.1875);
vertex(244, 144.1875);
vertex(244, 146.1875);
vertex(239, 149.1875);
vertex(235, 151.1875);
vertex(229, 152.1875);
vertex(228, 155.1875);
vertex(227, 160.1875);
vertex(225, 165.1875);
vertex(224, 172.1875);
vertex(222, 178.1875);
vertex(218, 185.1875);
vertex(215, 193.1875);
vertex(213, 200.1875);
vertex(209, 208.1875);
vertex(204, 214.1875);
vertex(200, 218.1875);
vertex(194, 222.1875);
vertex(187, 224.1875);
vertex(176, 224.1875);
vertex(166, 220.1875);
vertex(157, 216.1875);
vertex(151, 208.1875);
vertex(145, 200.1875);
vertex(138, 188.1875);
vertex(135, 179.1875);
vertex(130, 169.1875);
vertex(126, 163.1875);
vertex(123, 157.1875);
vertex(116, 156.1875);
vertex(112, 158.1875);
vertex(107, 159.1875);
vertex(102, 162.1875);
vertex(98, 162.1875);
vertex(96, 158.1875);
vertex(101, 154.1875);
vertex(107, 148.1875);
vertex(119, 145.1875);
vertex(124, 145.1875);
vertex(127, 147.1875);
vertex(126, 151.1875);
vertex(126, 154.1875);
endShape(CLOSE);
    beginShape();// mouth
vertex(127, 157.1875);
vertex(131, 161.1875);
vertex(135, 167.1875);
vertex(139, 172.1875);
vertex(144, 178.1875);
vertex(149, 182.1875);
vertex(155, 186.1875);
vertex(163, 189.1875);
vertex(168, 191.1875);
vertex(176, 193.1875);
vertex(184, 193.1875);
vertex(193, 193.1875);
vertex(202, 190.1875);
vertex(207, 186.1875);
vertex(212, 180.1875);
vertex(216, 175.1875);
vertex(219, 169.1875);
vertex(223, 163.1875);
vertex(224, 157.1875);
vertex(227, 150.1875);
vertex(227, 145.1875);
vertex(229, 139.1875);
vertex(234, 136.1875);
vertex(239, 137.1875);
vertex(242, 140.1875);
vertex(244, 144.1875);
vertex(244, 146.1875);
vertex(239, 149.1875);
vertex(235, 151.1875);
vertex(229, 152.1875);
vertex(228, 155.1875);
vertex(227, 160.1875);
vertex(225, 165.1875);
vertex(224, 172.1875);
vertex(222, 178.1875);
vertex(218, 185.1875);
vertex(215, 193.1875);
vertex(213, 200.1875);
vertex(209, 208.1875);
vertex(204, 214.1875);
vertex(200, 218.1875);
vertex(194, 222.1875);
vertex(187, 224.1875);
vertex(176, 224.1875);
vertex(166, 220.1875);
vertex(157, 216.1875);
vertex(151, 208.1875);
vertex(145, 200.1875);
vertex(138, 188.1875);
vertex(135, 179.1875);
vertex(130, 169.1875);
vertex(126, 163.1875);
vertex(123, 157.1875);
vertex(116, 156.1875);
vertex(112, 158.1875);
vertex(107, 159.1875);
vertex(102, 162.1875);
vertex(98, 162.1875);
vertex(96, 158.1875);
vertex(101, 154.1875);
vertex(107, 148.1875);
vertex(119, 145.1875);
vertex(124, 145.1875);
vertex(127, 147.1875);
vertex(126, 151.1875);
vertex(126, 154.1875);
endShape(CLOSE);
}

function drawRainbow() {
scale(0.3);
    beginShape();
vertex(75, 483.1875);
vertex(78, 461.1875);
vertex(82, 427.1875);
vertex(91, 394.1875);
vertex(104, 368.1875);
vertex(113, 346.1875);
vertex(123, 322.1875);
vertex(134, 302.1875);
vertex(146, 282.1875);
vertex(157, 264.1875);
vertex(170, 246.1875);
vertex(187, 226.1875);
vertex(205, 207.1875);
vertex(234, 182.1875);
vertex(260, 161.1875);
vertex(298, 137.1875);
vertex(327, 120.1875);
vertex(357, 105.1875);
vertex(401, 88.1875);
vertex(447, 77.1875);
vertex(486, 72.1875);
vertex(519, 69.1875);
vertex(561, 70.1875);
vertex(597, 73.1875);
vertex(634, 79.1875);
vertex(666, 88.1875);
vertex(702, 99.1875);
vertex(731, 110.1875);
vertex(756, 124.1875);
vertex(785, 139.1875);
vertex(813, 159.1875);
vertex(840, 178.1875);
vertex(867, 203.1875);
vertex(890, 227.1875);
vertex(907, 246.1875);
vertex(917, 262.1875);
vertex(932, 287.1875);
vertex(946, 306.1875);
vertex(959, 333.1875);
vertex(972, 360.1875);
vertex(982, 392.1875);
vertex(989, 413.1875);
vertex(996, 437.1875);
vertex(999, 452.1875);
vertex(1003, 488.1875);
vertex(1007, 517.1875);
vertex(1006, 549.1875);
vertex(1005, 584.1875);
vertex(1003, 614.1875);
vertex(994, 653.1875);
vertex(985, 690.1875);
vertex(971, 723.1875);
vertex(955, 758.1875);
vertex(936, 788.1875);
vertex(920, 812.1875);
vertex(901, 838.1875);
vertex(881, 860.1875);
vertex(859, 880.1875);
vertex(828, 906.1875);
vertex(801, 928.1875);
vertex(763, 950.1875);
vertex(726, 967.1875);
vertex(698, 979.1875);
vertex(663, 990.1875);
vertex(640, 996.1875);
vertex(605, 1003.1875);
vertex(561, 1006.1875);
vertex(529, 1006.1875);
vertex(481, 1002.1875);
vertex(433, 995.1875);
vertex(386, 980.1875);
vertex(345, 967.1875);
vertex(307, 946.1875);
vertex(268, 924.1875);
vertex(234, 896.1875);
vertex(207, 871.1875);
vertex(184, 843.1875);
vertex(159, 816.1875);
vertex(138, 784.1875);
vertex(119, 749.1875);
vertex(104, 717.1875);
vertex(91, 684.1875);
vertex(79, 643.1875);
vertex(72, 598.1875);
vertex(70, 563.1875);
vertex(69, 519.1875);
vertex(70, 498.1875);
endShape(CLOSE);
beginShape();
vertex(80, 469.1875);
vertex(87, 444.1875);
vertex(96, 419.1875);
vertex(109, 395.1875);
vertex(123, 367.1875);
vertex(138, 347.1875);
vertex(156, 328.1875);
vertex(175, 307.1875);
vertex(193, 294.1875);
vertex(209, 279.1875);
vertex(237, 263.1875);
vertex(258, 255.1875);
vertex(282, 245.1875);
vertex(312, 236.1875);
vertex(341, 231.1875);
vertex(365, 227.1875);
vertex(385, 225.1875);
vertex(405, 227.1875);
vertex(405, 227.1875);
vertex(432, 231.1875);
vertex(458, 236.1875);
vertex(476, 242.1875);
vertex(504, 251.1875);
vertex(525, 261.1875);
vertex(542, 269.1875);
vertex(557, 279.1875);
vertex(570, 289.1875);
vertex(575, 291.1875);
vertex(585, 299.1875);
vertex(591, 306.1875);
vertex(603, 315.1875);
vertex(611, 323.1875);
vertex(622, 341.1875);
vertex(639, 362.1875);
vertex(652, 380.1875);
vertex(662, 400.1875);
vertex(674, 424.1875);
vertex(681, 447.1875);
vertex(689, 480.1875);
vertex(693, 512.1875);
vertex(693, 523.1875);
vertex(694, 541.1875);
vertex(693, 559.1875);
vertex(693, 574.1875);
vertex(691, 594.1875);
vertex(687, 612.1875);
vertex(679, 635.1875);
vertex(669, 662.1875);
vertex(651, 693.1875);
vertex(633, 725.1875);
vertex(611, 748.1875);
vertex(588, 773.1875);
vertex(565, 791.1875);
vertex(538, 806.1875);
vertex(507, 788.1875);
vertex(480, 763.1875);
vertex(457, 739.1875);
vertex(433, 708.1875);
vertex(412, 669.1875);
vertex(400, 642.1875);
vertex(393, 614.1875);
vertex(386, 576.1875);
vertex(383, 547.1875);
vertex(385, 504.1875);
vertex(392, 469.1875);
vertex(398, 450.1875);
vertex(407, 414.1875);
vertex(429, 372.1875);
vertex(451, 341.1875);
vertex(478, 312.1875);
vertex(504, 289.1875);
vertex(535, 269.1875);
vertex(562, 253.1875);
vertex(593, 241.1875);
vertex(628, 233.1875);
vertex(659, 227.1875);
vertex(697, 228.1875);
vertex(735, 229.1875);
vertex(776, 237.1875);
vertex(808, 248.1875);
vertex(841, 262.1875);
vertex(870, 282.1875);
vertex(891, 297.1875);
vertex(914, 315.1875);
vertex(930, 336.1875);
vertex(945, 351.1875);
vertex(951, 361.1875);
vertex(962, 375.1875);
vertex(969, 393.1875);
vertex(978, 412.1875);
vertex(989, 432.1875);
vertex(993, 449.1875);
vertex(999, 489.1875);
vertex(1001, 510.1875);
vertex(1003, 532.1875);
vertex(1004, 552.1875);
vertex(1002, 574.1875);
vertex(1002, 587.1875);
vertex(999, 607.1875);
vertex(989, 638.1875);
vertex(980, 667.1875);
vertex(972, 682.1875);
vertex(953, 714.1875);
vertex(938, 735.1875);
vertex(915, 761.1875);
vertex(895, 780.1875);
vertex(859, 801.1875);
vertex(823, 820.1875);
vertex(799, 833.1875);
vertex(769, 841.1875);
vertex(739, 847.1875);
vertex(712, 849.1875);
vertex(663, 848.1875);
vertex(616, 840.1875);
vertex(576, 826.1875);
vertex(543, 810.1875);
vertex(535, 808.1875);
vertex(531, 815.1875);
vertex(495, 828.1875);
vertex(462, 838.1875);
vertex(418, 845.1875);
vertex(374, 847.1875);
vertex(318, 840.1875);
vertex(291, 833.1875);
vertex(257, 819.1875);
vertex(224, 803.1875);
vertex(195, 785.1875);
vertex(162, 755.1875);
vertex(137, 725.1875);
vertex(116, 695.1875);
vertex(99, 660.1875);
vertex(85, 627.1875);
vertex(79, 596.1875);
vertex(73, 564.1875);
vertex(72, 526.1875);
vertex(74, 489.1875);
vertex(78, 474.1875);
vertex(83, 458.1875);
endShape(CLOSE);
 beginShape();
vertex(89, 470.1875);
vertex(104, 444.1875);
vertex(129, 420.1875);
vertex(156, 401.1875);
vertex(179, 391.1875);
vertex(205, 384.1875);
vertex(231, 384.1875);
vertex(258, 384.1875);
vertex(279, 390.1875);
vertex(290, 396.1875);
vertex(305, 404.1875);
vertex(316, 410.1875);
vertex(330, 421.1875);
vertex(343, 432.1875);
vertex(351, 446.1875);
vertex(360, 459.1875);
vertex(367, 468.1875);
vertex(375, 493.1875);
vertex(380, 513.1875);
vertex(383, 521.1875);
vertex(385, 512.1875);
vertex(389, 498.1875);
vertex(396, 482.1875);
vertex(406, 461.1875);
vertex(419, 440.1875);
vertex(441, 418.1875);
vertex(462, 405.1875);
vertex(484, 393.1875);
vertex(508, 387.1875);
vertex(533, 385.1875);
vertex(556, 385.1875);
vertex(570, 385.1875);
vertex(591, 391.1875);
vertex(605, 398.1875);
vertex(620, 406.1875);
vertex(636, 417.1875);
vertex(648, 428.1875);
vertex(660, 439.1875);
vertex(672, 458.1875);
vertex(680, 471.1875);
vertex(686, 486.1875);
vertex(688, 492.1875);
vertex(691, 507.1875);
vertex(694, 520.1875);
vertex(699, 510.1875);
vertex(701, 500.1875);
vertex(706, 480.1875);
vertex(720, 453.1875);
vertex(740, 430.1875);
vertex(757, 415.1875);
vertex(774, 404.1875);
vertex(791, 394.1875);
vertex(812, 388.1875);
vertex(839, 382.1875);
vertex(863, 382.1875);
vertex(883, 385.1875);
vertex(905, 391.1875);
vertex(920, 398.1875);
vertex(938, 409.1875);
vertex(948, 418.1875);
vertex(958, 426.1875);
vertex(965, 433.1875);
vertex(977, 447.1875);
vertex(985, 461.1875);
vertex(997, 486.1875);
vertex(1002, 501.1875);
vertex(1002, 511.1875);
vertex(1004, 526.1875);
vertex(1005, 547.1875);
vertex(1001, 572.1875);
vertex(994, 597.1875);
vertex(986, 614.1875);
vertex(978, 628.1875);
vertex(965, 643.1875);
vertex(952, 654.1875);
vertex(938, 666.1875);
vertex(923, 675.1875);
vertex(900, 685.1875);
vertex(864, 691.1875);
vertex(829, 690.1875);
vertex(800, 684.1875);
vertex(774, 673.1875);
vertex(757, 661.1875);
vertex(735, 642.1875);
vertex(719, 620.1875);
vertex(708, 600.1875);
vertex(700, 582.1875);
vertex(698, 567.1875);
vertex(697, 555.1875);
vertex(697, 536.1875);
vertex(697, 522.1875);
vertex(693, 526.1875);
vertex(693, 534.1875);
vertex(693, 545.1875);
vertex(691, 563.1875);
vertex(691, 573.1875);
vertex(686, 591.1875);
vertex(677, 615.1875);
vertex(665, 631.1875);
vertex(654, 643.1875);
vertex(640, 659.1875);
vertex(625, 670.1875);
vertex(603, 679.1875);
vertex(583, 687.1875);
vertex(564, 690.1875);
vertex(540, 692.1875);
vertex(519, 691.1875);
vertex(492, 685.1875);
vertex(474, 677.1875);
vertex(453, 666.1875);
vertex(433, 649.1875);
vertex(416, 631.1875);
vertex(402, 612.1875);
vertex(395, 596.1875);
vertex(388, 573.1875);
vertex(385, 553.1875);
vertex(385, 536.1875);
vertex(385, 525.1875);
vertex(382, 528.1875);
vertex(381, 543.1875);
vertex(379, 567.1875);
vertex(374, 585.1875);
vertex(368, 601.1875);
vertex(359, 622.1875);
vertex(344, 642.1875);
vertex(330, 655.1875);
vertex(319, 665.1875);
vertex(303, 673.1875);
vertex(289, 683.1875);
vertex(267, 687.1875);
vertex(253, 690.1875);
vertex(219, 692.1875);
vertex(200, 690.1875);
vertex(176, 685.1875);
vertex(150, 673.1875);
vertex(129, 659.1875);
vertex(111, 642.1875);
vertex(96, 620.1875);
vertex(85, 601.1875);
vertex(78, 584.1875);
vertex(73, 562.1875);
vertex(73, 545.1875);
vertex(72, 512.1875);
vertex(79, 493.1875);
vertex(84, 478.1875);
endShape(CLOSE);
    beginShape();
vertex(495, 514.1875);
vertex(505, 509.1875);
vertex(516, 504.1875);
vertex(526, 499.1875);
vertex(534, 495.1875);
vertex(539, 494.1875);
vertex(546, 495.1875);
vertex(551, 499.1875);
vertex(558, 501.1875);
vertex(565, 505.1875);
vertex(570, 507.1875);
vertex(575, 510.1875);
vertex(580, 512.1875);
vertex(584, 515.1875);
vertex(584, 561.1875);
vertex(582, 564.1875);
vertex(542, 584.1875);
vertex(537, 584.1875);
vertex(516, 575.1875);
vertex(495, 564.1875);
vertex(518, 552.1875);
vertex(516, 528.1875);
vertex(538, 518.1875);
vertex(540, 495.1875);
vertex(540, 518.1875);
vertex(561, 527.1875);
vertex(562, 552.1875);
vertex(540, 543.1875);
vertex(540, 564.1875);
vertex(561, 552.1875);
vertex(582, 563.1875);
vertex(560, 552.1875);
vertex(540, 564.1875);
vertex(518, 553.1875);
vertex(538, 542.1875);
vertex(539, 519.1875);
vertex(540, 541.1875);
vertex(560, 527.1875);
vertex(539, 541.1875);
vertex(494, 564.1875);
vertex(495, 533.1875);
vertex(495, 514.1875);
endShape(CLOSE);
    beginShape();
vertex(227, 585.1875);
vertex(218, 584.1875);
vertex(213, 579.1875);
vertex(208, 572.1875);
vertex(207, 560.1875);
vertex(209, 550.1875);
vertex(217, 544.1875);
vertex(225, 541.1875);
vertex(234, 542.1875);
vertex(239, 544.1875);
vertex(244, 548.1875);
vertex(248, 554.1875);
vertex(249, 562.1875);
vertex(249, 570.1875);
vertex(246, 575.1875);
vertex(242, 580.1875);
vertex(237, 583.1875);
vertex(231, 584.1875);
vertex(212, 582.1875);
vertex(206, 578.1875);
vertex(200, 568.1875);
vertex(195, 561.1875);
vertex(195, 550.1875);
vertex(196, 540.1875);
vertex(203, 530.1875);
vertex(210, 523.1875);
vertex(219, 519.1875);
vertex(230, 519.1875);
vertex(238, 519.1875);
vertex(245, 523.1875);
vertex(249, 527.1875);
vertex(253, 531.1875);
vertex(256, 536.1875);
vertex(260, 546.1875);
vertex(260, 555.1875);
vertex(259, 563.1875);
vertex(257, 568.1875);
vertex(253, 573.1875);
vertex(250, 577.1875);
vertex(245, 581.1875);
vertex(240, 584.1875);
vertex(229, 585.1875);
vertex(211, 583.1875);
vertex(200, 577.1875);
vertex(192, 569.1875);
vertex(185, 558.1875);
vertex(182, 544.1875);
vertex(182, 528.1875);
vertex(188, 514.1875);
vertex(196, 505.1875);
vertex(206, 498.1875);
vertex(220, 494.1875);
vertex(232, 494.1875);
vertex(240, 494.1875);
vertex(246, 497.1875);
vertex(253, 500.1875);
vertex(260, 506.1875);
vertex(264, 510.1875);
vertex(268, 517.1875);
vertex(272, 526.1875);
vertex(274, 535.1875);
vertex(274, 541.1875);
vertex(273, 553.1875);
vertex(266, 565.1875);
vertex(262, 571.1875);
vertex(255, 575.1875);
vertex(249, 579.1875);
endShape(CLOSE);
    beginShape();
vertex(827, 524.1875);
vertex(818, 527.1875);
vertex(813, 529.1875);
vertex(808, 534.1875);
vertex(805, 539.1875);
vertex(806, 542.1875);
vertex(809, 545.1875);
vertex(812, 548.1875);
vertex(816, 549.1875);
vertex(818, 552.1875);
vertex(824, 553.1875);
vertex(831, 554.1875);
vertex(838, 555.1875);
vertex(845, 556.1875);
vertex(851, 556.1875);
vertex(857, 556.1875);
vertex(866, 557.1875);
vertex(874, 556.1875);
vertex(883, 552.1875);
vertex(892, 548.1875);
vertex(896, 543.1875);
vertex(896, 535.1875);
vertex(890, 530.1875);
vertex(883, 526.1875);
vertex(875, 524.1875);
vertex(867, 523.1875);
vertex(860, 523.1875);
vertex(849, 522.1875);
vertex(844, 522.1875);
vertex(838, 522.1875);
vertex(834, 522.1875);
vertex(836, 516.1875);
vertex(839, 508.1875);
vertex(841, 500.1875);
vertex(846, 495.1875);
vertex(851, 493.1875);
vertex(855, 494.1875);
vertex(859, 497.1875);
vertex(861, 502.1875);
vertex(862, 507.1875);
vertex(864, 511.1875);
vertex(865, 515.1875);
vertex(866, 519.1875);
vertex(867, 525.1875);
vertex(867, 528.1875);
vertex(868, 539.1875);
vertex(867, 550.1875);
vertex(866, 563.1875);
vertex(862, 574.1875);
vertex(858, 582.1875);
vertex(855, 585.1875);
vertex(850, 586.1875);
vertex(844, 583.1875);
vertex(839, 577.1875);
vertex(838, 567.1875);
vertex(835, 555.1875);
vertex(834, 547.1875);
vertex(834, 537.1875);
vertex(834, 525.1875);
vertex(834, 530.1875);
vertex(838, 527.1875);
vertex(844, 522.1875);
vertex(848, 518.1875);
vertex(857, 513.1875);
vertex(866, 507.1875);
vertex(875, 505.1875);
vertex(880, 504.1875);
vertex(884, 506.1875);
vertex(885, 510.1875);
vertex(886, 514.1875);
vertex(885, 518.1875);
vertex(882, 526.1875);
vertex(879, 533.1875);
vertex(872, 539.1875);
vertex(867, 547.1875);
vertex(858, 554.1875);
vertex(856, 558.1875);
vertex(852, 560.1875);
vertex(847, 564.1875);
vertex(842, 568.1875);
vertex(833, 573.1875);
vertex(825, 573.1875);
vertex(818, 572.1875);
vertex(816, 566.1875);
vertex(817, 559.1875);
vertex(820, 555.1875);
vertex(823, 547.1875);
vertex(828, 540.1875);
vertex(832, 534.1875);
vertex(827, 538.1875);
vertex(831, 541.1875);
vertex(834, 546.1875);
vertex(840, 552.1875);
vertex(855, 564.1875);
vertex(864, 570.1875);
vertex(873, 572.1875);
vertex(881, 573.1875);
vertex(885, 569.1875);
vertex(886, 563.1875);
vertex(883, 555.1875);
vertex(879, 547.1875);
vertex(873, 536.1875);
vertex(855, 519.1875);
vertex(840, 509.1875);
vertex(826, 505.1875);
vertex(821, 505.1875);
vertex(817, 509.1875);
vertex(817, 515.1875);
vertex(818, 520.1875);
vertex(821, 528.1875);
vertex(823, 532.1875);
vertex(825, 535.1875);
vertex(829, 538.1875);
endShape(CLOSE);
    beginShape();
vertex(305, 746.1875);
vertex(312, 747.1875);
vertex(318, 746.1875);
vertex(324, 746.1875);
vertex(335, 747.1875);
vertex(343, 747.1875);
vertex(350, 746.1875);
vertex(355, 746.1875);
vertex(339, 717.1875);
vertex(304, 776.1875);
vertex(375, 777.1875);
vertex(357, 747.1875);
vertex(373, 747.1875);
endShape(CLOSE);
}

function handleFileUpload(event) {
   let file = event.target.files[0];
   if (file && file.type.startsWith('audio/')) {
       let fileURL = URL.createObjectURL(file);

       // Update audio player with the new audio file
       const audioElement = document.getElementById('player');
       const defaultAudioElement = document.getElementById('default-player');
       audioElement.src = fileURL;
       defaultAudioElement.src = fileURL;

       if (player) {
           player.source = {
               type: 'audio',
               sources: [{ src: fileURL, type: file.type }]
           };
       }

       // Update song title
       const songTitleElement = document.getElementById('song-title');
       songTitleElement.textContent = file.name;

       // Load sound for p5.js analysis
       loadSound(fileURL, soundLoaded);
   } else {
       console.error('Please upload a valid audio file');
   }
}

function soundLoaded(loadedSong) {
   if (song && song.isPlaying()) {
       song.stop();
   }
   song = loadedSong;
   song.play();
   amplitude.setInput(song);
   fft.setInput(song);
}
</script>

</body>
</html>
